# 电影导航网站阿里云部署 - 需求文档

## 1. 项目概述

将一个现代感玻璃拟态风格的电影导航网站部署到阿里云服务器（IP: 8.153.206.100），使其能够通过公网 IP 访问。

### 1.1 当前状态
- **本地文件**：HTML/CSS/JS 已完成开发
- **本地路径**：`C:\Users\Administrator\.gemini\antigravity\scratch\movie-nav`
- **服务器**：阿里云 ECS (8.153.206.100)
- **Web 服务器**：Nginx（已安装）
- **已知问题**：
  - SSH 连接不稳定
  - Nginx 配置路径不明确
  - 80 端口外部访问状态未知

## 2. 用户故事

### 2.1 作为网站管理员
**我想要**：能够稳定连接到阿里云服务器  
**以便**：执行部署和配置操作  
**验收标准**：
- 能够通过 SSH 连接到 root@8.153.206.100
- 连接保持稳定，不会频繁超时
- 能够执行基本的 Linux 命令

### 2.2 作为网站管理员
**我想要**：确认 Nginx 的正确配置路径  
**以便**：将网站文件放在正确的目录  
**验收标准**：
- 能够读取 Nginx 配置文件
- 确认 `root` 指令指向的目录
- 了解是使用 `/var/www/html` 还是 `/usr/share/nginx/html`

### 2.3 作为网站管理员
**我想要**：将本地网站文件同步到服务器  
**以便**：网站能够在服务器上运行  
**验收标准**：
- `index.html`、`style.css`、`script.js` 成功上传
- 文件权限正确设置
- Nginx 能够读取这些文件

### 2.4 作为网站管理员
**我想要**：确认 80 端口对外开放  
**以便**：用户能够通过公网访问网站  
**验收标准**：
- 服务器内部 Nginx 监听 80 端口
- 阿里云安全组规则允许 80 端口入站
- 外部能够通过 `http://8.153.206.100` 访问网站

### 2.5 作为最终用户
**我想要**：访问电影导航网站  
**以便**：浏览和访问各个影视资源站  
**验收标准**：
- 通过 `http://8.153.206.100` 能够看到网站首页
- 玻璃拟态效果正常显示
- 所有链接可点击
- 移动端适配正常

## 3. 技术需求

### 3.1 连通性诊断
- SSH 连接验证
- 网络延迟测试
- 80 端口可达性检测（内部和外部）

### 3.2 Nginx 配置
- 定位配置文件位置
- 验证 `root` 指令
- 检查 `server` 块配置
- 验证配置语法
- 重载配置

### 3.3 文件传输
- 从本地 Windows 路径传输到 Linux 服务器
- 保持文件结构
- 设置正确的文件权限（644 for files, 755 for directories）

### 3.4 防火墙配置
- 服务器防火墙（iptables/firewalld）检查
- 阿里云安全组规则验证
- 确保 80 端口入站规则存在

## 4. 非功能性需求

### 4.1 可靠性
- 部署过程应该是幂等的（可重复执行）
- 提供回滚方案

### 4.2 可维护性
- 配置文件应该有备份
- 提供清晰的部署文档

### 4.3 安全性
- 使用 SSH 密钥认证（推荐）
- 文件权限最小化原则

## 5. 约束条件

- 服务器操作系统：Linux（具体发行版待确认）
- Web 服务器：Nginx（已安装）
- 本地环境：Windows
- 网络：需要稳定的互联网连接

## 6. 部署优先级

1. **P0 - 关键**：建立稳定的 SSH 连接
2. **P0 - 关键**：确认 Nginx root 路径
3. **P0 - 关键**：上传网站文件
4. **P0 - 关键**：验证 80 端口开放
5. **P1 - 重要**：配置阿里云安全组
6. **P1 - 重要**：验证网站可访问性
7. **P2 - 可选**：配置域名（如果需要）
8. **P2 - 可选**：配置 HTTPS（如果需要）

## 7. 成功标准

部署成功的标志：
1. 能够通过 `http://8.153.206.100` 访问网站
2. 网站显示正常，包括样式和交互
3. 所有资源文件（CSS、JS）正确加载
4. 移动端访问正常

## 8. 风险与缓解

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| SSH 连接不稳定 | 高 | 使用更稳定的网络，考虑使用跳板机 |
| Nginx 配置错误 | 高 | 备份原配置，使用 `nginx -t` 验证 |
| 安全组未开放 | 高 | 提供阿里云控制台操作指南 |
| 文件权限错误 | 中 | 使用标准权限设置脚本 |
| 文件传输失败 | 中 | 使用可靠的传输工具（SCP/SFTP） |
